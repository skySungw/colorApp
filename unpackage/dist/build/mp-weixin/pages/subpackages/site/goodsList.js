(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subpackages/site/goodsList"],{"39a9":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(n("a34a")),a=n("c991");function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,s,a,o,i){try{var r=t[o](i),c=r.value}catch(u){return void n(u)}r.done?e(c):Promise.resolve(c).then(s,a)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(s,a){var o=t.apply(e,n);function r(t){i(o,s,a,r,c,"next",t)}function c(t){i(o,s,a,r,c,"throw",t)}r(void 0)}))}}var c=function(){n.e("components/goods").then(function(){return resolve(n("04dd"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/empty").then(function(){return resolve(n("c021"))}.bind(null,n)).catch(n.oe)},l={components:{Goods:c,Empty:u},data:function(){return{menuIndex:0,menuTop:this.CustomBar,menu:[{id:1,name:"圈友商品"},{id:2,name:"自营商品"}],params:{size:10,current:1,total:0,lat:"",lng:"",goodsName:"",sortType:0,goodsType:"",showcaseId:""},list:[],isSearchFocus:!1,searchValue:"",timer:null,time:1e3}},onLoad:function(e){this.params.showcaseId=t.getStorageSync("showcaseId")||"",this.init()},onShow:function(){},onReachBottom:function(){console.log("bottom"),this.hasNext()&&(this.params.current++,this.getGoodsList())},methods:{onSearchCancel:function(){this.isSearchFocus=!1,this.searchValue="",this.list=[],this.getGoodsList()},onInput:function(t){var e=this;this.searchValue=t.detail.value,clearTimeout(this.timer),console.log("this.searchValue",this.searchValue),this.timer=setTimeout((function(){clearTimeout(e.timer),e.getGoodsList()}),this.time)},showSearchBar:function(){this.isSearchFocus=!0},onMenuChange:function(t){this.list=[],this.menuIndex=t.currentTarget.dataset["index"],this.params.goodsType=this.menuIndex,this.init()},hasNext:function(){return this.params.current<Math.ceil(this.params.total/this.params.size)},init:function(){this.params.current=1,this.params.total=0,this.list=[],this.getGoodsList()},getGoodsList:function(){var t=this;return r(s.default.mark((function e(){var n;return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,Object.assign(t.params,{goodsName:t.searchValue}),e.next=4,(0,a.onFetchGoodsList)(t.params);case 4:n=e.sent,200===n.code&&(t.params.total=n.data.total,1==t.params.current?t.list=n.data.records:t.list=t.list.concat(n.data.records),console.log("this.list",t.list)),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("err",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}};e.default=l}).call(this,n("543d")["default"])},"3c36":function(t,e,n){"use strict";(function(t){n("cb01");s(n("66fd"));var e=s(n("57ed"));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},"445c":function(t,e,n){},4515:function(t,e,n){"use strict";var s;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return s}));var a=function(){var t=this,e=t.$createElement;t._self._c},o=[]},"57ed":function(t,e,n){"use strict";n.r(e);var s=n("4515"),a=n("6c04");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("c2a9");var i,r=n("f0c5"),c=Object(r["a"])(a["default"],s["b"],s["c"],!1,null,"108e4f81",null,!1,s["a"],i);e["default"]=c.exports},"6c04":function(t,e,n){"use strict";n.r(e);var s=n("39a9"),a=n.n(s);for(var o in s)"default"!==o&&function(t){n.d(e,t,(function(){return s[t]}))}(o);e["default"]=a.a},c2a9:function(t,e,n){"use strict";var s=n("445c"),a=n.n(s);a.a}},[["3c36","common/runtime","common/vendor"]]]);